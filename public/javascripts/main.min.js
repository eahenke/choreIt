!function(){var e=angular.module("choreIt",["ui.router"]);e.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("home",{url:"/home",templateUrl:"/home.html",controller:"MainCtrl",controllerAs:"main"}).state("login",{url:"/login",templateUrl:"/login.html",controller:"AuthCtrl",controllerAs:"auth",onEnter:["$state","auth",function(e,t){t.isLoggedIn()&&e.go("home")}]}).state("register",{url:"/register",templateUrl:"/register.html",controller:"AuthCtrl",controllerAs:"auth",onEnter:["$state","auth",function(e,t){t.isLoggedIn()&&e.go("home")}]}),t.otherwise("home")}])}(),function(){var e=angular.module("choreIt");e.controller("AuthCtrl",["$state","auth",function(e,t){var o=this;o.user={},o.register=function(){t.register(o.user)["catch"](function(e){o.error=e,console.log(e)}).then(function(){o.error||e.go("home")})},o.logIn=function(){t.logIn(o.user)["catch"](function(e){o.error=e,console.log(e.data.message)}).then(function(){o.error||e.go("home")})}}])}(),function(){var e=angular.module("choreIt");e.factory("auth",["$window","$http",function(e,t){var o={};return o.getToken=function(){return e.localStorage["choreIt-token"]},o.saveToken=function(t){e.localStorage["choreIt-token"]=t},o.logOut=function(){e.localStorage.removeItem("choreIt-token")},o.register=function(e){return t.post("/register",e).then(function(e){e.data.token&&o.saveToken(e.data.token)})},o.logIn=function(e){return console.log(e),t.post("/login",e).then(function(e){e.data.token&&o.saveToken(e.data.token)})},o.isLoggedIn=function(){var t=o.getToken();if(t){var r=JSON.parse(e.atob(t.split(".")[1]));return r.exp>Date.now()/1e3}return!1},o.currentUser=function(){if(o.isLoggedIn()){var t=o.getToken(),r=JSON.parse(e.atob(t.split(".")[1]));return r.username}},o}])}(),function(){var e=angular.module("choreIt");e.factory("chores",function(){var e={weeks:[{week:1,chores:[{body:"Take out the trash",complete:!1},{body:"Mop the floor",complete:!1},{body:"Do the dishes",complete:!0}]},{week:2,chores:[{body:"Take out the recycling",complete:!1},{body:"Mop the floor",complete:!0},{body:"Clean the refrigerator",complete:!0}]}]};return e})}(),function(){var e=angular.module("choreIt");e.controller("MainCtrl",["chores",function(e){var t=this;t.weeks=e.weeks,t.activeWeek=t.weeks[0],t.setActiveWeek=function(e){t.activeWeek=t.weeks[e]},t.addChore=function(){t.activeWeek.chores.push({body:t.newChore,complete:!1}),t.newChore=""},t.toggleComplete=function(e){e.complete=!e.complete}}])}(),function(){var e=angular.module("choreIt");e.controller("NavCtrl",["auth",function(e){var t=this;t.isLoggedIn=e.isLoggedIn,t.currentUser=e.currentUser,t.logOut=e.logOut}])}();