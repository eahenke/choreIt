<!DOCTYPE html>
<html>
    <head>
        <title>ChoreIt</title>

        <!-- Meta -->
        <meta charset="utf-8" />
        <meta name="author" content="Eric Henke" />
        <meta name="viewport" content="width=device-width" /> 

        <!-- Stylesheets -->
        <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">

        <!-- Scripts -->
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.10/angular.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.10/angular-ui-router.js"></script>
        <script src="/javascripts/main.js"></script>
    </head>
    <body ng-app="choreIt">
        <nav class="navbar navbar-default pull-right" ng-controller="NavCtrl as nav">
            <ul class="nav navbar-nav">
                <li ng-show="nav.isLoggedIn()"><a>{{ nav.currentUser() }}</a></li>
                <li ng-show="nav.isLoggedIn()"><a href='' ng-click="nav.logOut()">Log Out</a></li>
                <li ng-hide="nav.isLoggedIn()"><a href='/#/register'>Register</a></li>
                <li ng-hide="nav.isLoggedIn()"><a href='/#/login'>Login</a></li>
            </ul>
        </nav>

        <div class="row">
            <div class="col-md-6 col-md-offset-3">
                <div class="page-header">
                    <h1>ChoreIt</h1>
                </div>
            </div>
        </div>

        <div class="row">
                <ui-view></ui-view>
        </div>


    <script type="text/ng-template" id="/home.html">
        
        <div class="col-md-3">
            <h2>Chore Groups</h2>
            
            <form ng-submit="main.addGroup()">
                <h3>Add a Group</h3>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Group Name" ng-model="main.newGroup">
                </div>
                <button type="submit">Add Group</button>
            </form>

            <ul>
                <li ng-repeat-start="group in main.groups | orderBy: 'date'" ng-click="main.setActiveGroup(group)"> {{group.title}}
                </li>
                <span ng-repeat-end ng-click="main.deleteGroup(group)">Delete</span>
            </ul>

        </div>

        <div class="col-md-5" ng-show="main.activeGroup">
            <h2>Chores</h2>
            <h3>{{main.activeGroup.title}}</h3>
            <table class="table table-bordered">                
                <tr ng-repeat="chore in main.activeGroup.chores">
                    <td ng-class="{completed: chore.complete}">{{chore.body}}</td>
                    <td ng-click="main.toggleComplete(chore)">Toggle</td>
                    <td ng-click="main.deleteChore(chore)">Delete</td>
                    <td>Edit</td>
                </tr>
            </table>

            <form ng-submit="main.addChore()">
                <h3>Add a new chore</h3>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Chore" ng-model="main.newChore">
                    <br />
                </div>

                <button type="submit">Add</button>          
            </form>
        </div>
    </script>

    <!-- Register template -->
    <script type="text/ng-template" id="/register.html">
        <div class="col-md-6 col-md-offset-3">
        <div class="alert alert-danger row" ng-show="auth.error">
            <span>{{ auth.error.data.message }}</span>
        </div>

        <form ng-submit="auth.register()">
            <h3>Register</h3>
            <div class="form-group">
                <input type="text" class="form-control" placeholder="Username" ng-model="auth.user.username" />
            </div>

            <div class="form-group">
                <input type="password" class="form-control" placeholder="Password" ng-model="auth.user.password" />
            </div>
            <button type="submit" class="btn btn-primary">Register</button>
        </form>
        </div>
    </script>

    <!-- Login template -->
    <script type="text/ng-template" id="/login.html">
        <div class="col-md-6 col-md-offset-3">

        <div class="alert alert-danger row" ng-show="auth.error">
            <span>{{ auth.error.data.message }}</span>
        </div>

        <form ng-submit="auth.logIn()">
            <h3>Register</h3>
            <div class="form-group">
                <input type="text" class="form-control" placeholder="Username" ng-model="auth.user.username" />
            </div>

            <div class="form-group">
                <input type="password" class="form-control" placeholder="Password" ng-model="auth.user.password" />
            </div>
            <button type="submit" class="btn btn-primary">Log In</button>
        </form>
        </div>
    </script>


  </body>
